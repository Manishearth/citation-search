<html>
<head>
	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config(
                           {
                           "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
                           tex2jax: {
                           inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ],
                           displayMath: [ ["$$","$$"], ["\\[", "\\]"] ],
                           processEscapes: true,
                           ignoreClass: "tex2jax_ignore|dno"
                           },
                           TeX: {
                           noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }
                           },
                           messageStyle: "none"
                           });
        </script>    
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
Search the mathematics literature:<br/>
<input id="query" size=60/><img id="spinner" src="http://www.ajaxload.info/cache/FF/FF/FF/00/00/00/1-0.gif" style="display: none;"/>
<br/>
<span id="results">
</span>
<script>
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
  };
})();

$("#query").keyup(function () {
	delay(function() {
		var query = $("#query").val();
       	$.getJSON("http://polar-dawn-1849.herokuapp.com/?callback=?&q=" + query, function(response) {
       	if($("#query").val() == query) {
	       	var html = '<ol>\n';
	       	for (var i = 0; i < response.results.length; i++) {
	       		html += '<li>' + '<a href="' + response.results[i].url + '">' + response.results[i].title + '</a> - ' + response.results[i].authors + ' - ' + response.results[i].cite /* + " (" + response.results[i].score + ")" */ + '</li>';
	       	}
	       	$("#results").empty();
	       	$("#results").append(html);
	       	MathJax.Hub.Queue(["Typeset",MathJax.Hub,"results"]);
	       	$("#spinner").hide();
       }
       })
      	$("#spinner").show();
       }, 500);
});
</script>
</body>
</html>